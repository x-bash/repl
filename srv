rm "$TMPDIR/stdin.$$" "$TMPDIR/stdout.$$" "$TMPDIR/stderr.$$" 2>/dev/null

mkfifo "$TMPDIR/stdin.$$" "$TMPDIR/stdout.$$" "$TMPDIR/stderr.$$"

printf "%s" "Name is $$" >&2

while :; do
    read -r line
    case "$line" in
        "%exit")    break ;;
    esac
    eval "$line"
done <"$TMPDIR/stdin.$$" >>"$TMPDIR/stdout.$$" 2>>"$TMPDIR/stderr.$$"
